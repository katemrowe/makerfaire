function shuffle(r){for(var a=r.length,n,e;0!==a;)e=Math.floor(Math.random()*a),a-=1,n=r[a],r[a]=r[e],r[e]=n;return r}var ribbonApp=angular.module("ribbonApp",["ngRoute","angularUtils.directives.dirPagination"]);ribbonApp.directive("fallbackSrc",function(){var r={link:function a(r,n,e){n.bind("error",function(){angular.element(this).attr("src",e.fallbackSrc)})}};return r}),ribbonApp.controller("ribbonController",function(r,a){r.layout="grid",r.currentPage=1,r.pageSize=40,r.faires=[],r.random=function(){return.5-Math.random()},r.years=yearJson,r.loadData=function(n){var e={action:"getRibbonData",year:n};a.get("/wp-content/themes/makerfaire/partials/data/"+n+"ribbonData.json").success(function(a){r.ribbons=a.json,shuffle(r.ribbons),r.blueList=a.blueList,r.redList=a.redList,angular.forEach(r.ribbons,function(a,n){angular.forEach(a.faireData,function(a,n){-1==r.faires.indexOf(a.faire)&&r.faires.push(a.faire)}),r.faires.sort()})}).error(function(r,a,n,e){alert("error")})},faireYear=r.years[0].name,r.loadData(faireYear),r.pageChangeHandler=function(r){}});